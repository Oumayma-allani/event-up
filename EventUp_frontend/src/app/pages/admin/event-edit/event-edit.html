<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-header">
          <h4 class="text-center">Modifier événement</h4>
        </div>
        <div class="card-body">
        <div *ngIf="event.sousCategorie && event.local && event.organisateur">
  <form (ngSubmit)="onSubmit()">
    <!-- Titre -->
    <div class="mb-3">
      <label>Titre</label>
      <input type="text" class="form-control" [(ngModel)]="event.title" name="title" required>
    </div>

    <!-- Description -->
    <div class="mb-3">
      <label>Description</label>
      <input type="text" class="form-control" [(ngModel)]="event.description" name="description">
    </div>

    <!-- Dates -->
    <div class="mb-3">
      <label>Date de début</label>
      <input type="date" class="form-control" [(ngModel)]="event.startDate" name="startDate">
    </div>

    <div class="mb-3">
      <label>Date de fin</label>
      <input type="date" class="form-control" [(ngModel)]="event.endDate" name="endDate">
    </div>

    <!-- Sous-catégorie -->
    <div class="mb-3">
      <label>Sous-catégorie</label>
      <select class="form-select" [(ngModel)]="event.sousCategorie.id" name="sousCategorie">
        <option *ngFor="let sc of sousCategories" [value]="sc.id">{{ sc.name }}</option>
      </select>
    </div>

    <!-- Local -->
    <div class="mb-3">
      <label>Local</label>
      <select class="form-select" [(ngModel)]="event.local.id" name="local">
        <option *ngFor="let l of locals" [value]="l.id">{{ l.name }}</option>
      </select>
    </div>

    <!-- Organisateur -->
    <div class="mb-3">
      <label>Organisateur</label>
      <select class="form-select" [(ngModel)]="event.organisateur.id" name="organisateur">
        <option *ngFor="let user of organisateurs" [value]="user.id">{{ user.firstname }} {{ user.lastname }}</option>
      </select>
    </div>

    <!-- Boutons -->
    <button type="submit" class="btn btn-success">Enregistrer</button>
    <a routerLink="/admin/events" class="btn btn-secondary ms-2">Annuler</a>
  </form>
  </div>
      </div>
    </div>
  </div>
</div>
</div>

<!-- Message de chargement pendant le fetch -->
<div *ngIf="!(event.sousCategorie && event.local && event.organisateur)">
  Chargement des données...
</div>
